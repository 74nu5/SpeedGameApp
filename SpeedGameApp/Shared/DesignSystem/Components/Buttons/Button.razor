@* Themed button component *@
<button type="@Type"
        class="@GetButtonClasses()"
        disabled="@Disabled"
        @onclick="OnClick">
    @if (Loading)
    {
        <span class="loading mr-2"></span>
    }
    @ChildContent
</button>

@code {
    /// <summary>
    ///     Gets or sets the button variant (primary, secondary, danger, ghost).
    /// </summary>
    [Parameter]
    public string Variant { get; set; } = "primary";

    /// <summary>
    ///     Gets or sets the button size (sm, md, lg).
    /// </summary>
    [Parameter]
    public string Size { get; set; } = "md";

    /// <summary>
    ///     Gets or sets whether the button is disabled.
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; }

    /// <summary>
    ///     Gets or sets whether the button is in loading state.
    /// </summary>
    [Parameter]
    public bool Loading { get; set; }

    /// <summary>
    ///     Gets or sets the button type (button, submit, reset).
    /// </summary>
    [Parameter]
    public string Type { get; set; } = "button";

    /// <summary>
    ///     Gets or sets additional CSS classes.
    /// </summary>
    [Parameter]
    public string? AdditionalClasses { get; set; }

    /// <summary>
    ///     Gets or sets the click event callback.
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    /// <summary>
    ///     Gets or sets the child content.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    ///     Builds the button CSS classes based on variant and size.
    /// </summary>
    private string GetButtonClasses()
    {
        var baseClasses = "inline-flex items-center justify-center font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";

        var variantClass = Variant.ToLower() switch
        {
            "primary" => "btn-primary",
            "secondary" => "btn-secondary",
            "danger" => "btn-danger",
            "ghost" => "bg-transparent hover:bg-gray-100 text-gray-700 dark:hover:bg-gray-800 dark:text-gray-300",
            _ => "btn-primary"
        };

        var sizeClass = Size.ToLower() switch
        {
            "sm" => "px-3 py-1.5 text-sm rounded",
            "md" => "px-4 py-2 text-base rounded-lg",
            "lg" => "px-6 py-3 text-lg rounded-xl",
            _ => "px-4 py-2 text-base rounded-lg"
        };

        return $"{baseClasses} {variantClass} {sizeClass} {AdditionalClasses ?? string.Empty}".Trim();
    }
}
